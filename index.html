<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		 <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

		<title>Bike Finder Home / Products</title>

		<!-- Google font -->
		<link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">

		<!-- Bootstrap -->
		<link type="text/css" rel="stylesheet" href="css/bootstrap.min.css"/>

		<!-- Slick -->
		<link type="text/css" rel="stylesheet" href="css/slick.css"/>
		<link type="text/css" rel="stylesheet" href="css/slick-theme.css"/>

		<!-- nouislider -->
		<link type="text/css" rel="stylesheet" href="css/nouislider.min.css"/>

		<!-- Font Awesome Icon -->
		<link rel="stylesheet" href="css/font-awesome.min.css">

		<!-- Custom stlylesheet -->
		<link type="text/css" rel="stylesheet" href="css/style.css"/>

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

    </head>
	<body>
		<!-- HEADER -->
		<header>
			<!-- TOP HEADER -->
			<div id="top-header">
				<div class="container">
					<ul class="header-links pull-left">
						<li><a href="#"><i class=""></i> </a></li>
						<li><a href="#"><i class=""></i> </a></li>
						<li><a href="#"><i class=""></i> </a></li>
					</ul>
					<ul class="header-links pull-right">
						<li><a href="#"><i class=""></i> </a></li>
						<li><a href="#"><i class=""></i> </a></li>
					</ul>
				</div>
			</div>
			<!-- /TOP HEADER -->

			<!-- MAIN HEADER -->
			<div id="header">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<!-- LOGO -->
						<div class="col-md-3">
							<div class="header-logo">
								<a href="#" class="logo">
									<img src="./images/logo.png" alt="" height="150px" width="125px">
								</a>
							</div>
						</div>
						<!-- /LOGO -->

						<!-- SEARCH BAR -->

						<!-- /SEARCH BAR -->

						<!-- ACCOUNT -->
						<div class="col-md-3 clearfix">
							<div class="header-ctn">
								<!-- Wishlist -->
								<div>
									<a href="#">
										<i class="fa fa-instagram"></i>
										<span></span>
										<div class=""></div>
									</a>
								</div>
								<!-- /Wishlist -->

								<!-- Cart -->
							<div>
								<a href="#">
										<i class="fa fa-youtube"></i>
										<span></span>
										<div class=""></div>

								</a>

							</div>
								<!-- /Cart -->

								<!-- Menu Toogle -->
								<div class="menu-toggle">
									<a href="#">
										<i class="fa fa-bars"></i>
										<span>Menu</span>
									</a>
								</div>
								<!-- /Menu Toogle -->
							</div>
						</div>
						<!-- /ACCOUNT -->
					</div>
					<!-- row -->
				</div>
				<!-- container -->
			</div>
			<!-- /MAIN HEADER -->
		</header>
		<!-- /HEADER -->

		<!-- NAVIGATION -->
		<nav id="navigation">
			<!-- container -->
			<div class="container">
				<!-- responsive-nav -->
				<div id="responsive-nav">
					<!-- NAV -->
					<ul class="main-nav nav navbar-nav">
						<li class="active"><a href="index.html">Home</a></li>
						<li><a href="trials.html">Trials Bikes</a></li>
						<li><a href="enduro.html">Enduro Bikes</a></li>
						<li><a href="mx.html">Motorcross Bikes</a></li>
						<li><a href="#">Mountain Bikes</a></li>
						<li><a href="news.html">News</a></li>
						<li><a href="contact.html">Get in Touch</a></li>
					</ul>
					<!-- /NAV -->
				</div>
				<!-- /responsive-nav -->
			</div>
			<!-- /container -->
		</nav>
		<!-- /NAVIGATION -->
<!---carousel ---->
<!-- Slideshow container -->
<div class="carousel-container">
  <div class="slides" id="slides">
    <div class="slide">
      <img src="images/gasgas.jpg" alt="Image 1">
      <div class="slide-text">
        GasGas Specials
        <p>Check out the latest GasGas off-road bikes with unbeatable deals and performance specs.</p>
      </div>
    </div>
    <div class="slide">
      <img src="images/ktm.png" alt="Image 2">
      <div class="slide-text">
        Latest KTM Deals
        <p>Experience the thrill of KTM power with discounts on 2-stroke and 4-stroke models.</p>
      </div>
    </div>
    <div class="slide">
      <img src="images/montessa.jpg" alt="Image 3">
      <div class="slide-text">
        Montesa Offers
        <p>Legendary trials performance from Montesa — explore current stock and savings now.</p>
      </div>
    </div>
  </div>

  <button class="prev" onclick="changeSlide(-1)">❮</button>
  <button class="next" onclick="changeSlide(1)">❯</button>
</div>

<!----carousal end -->

<!----logo slider----->
<div class="logo-slider">
  <div class="logo-track">
    <!-- Logos (repeat twice for seamless loop) -->
    <img src="images/absoloute.png" alt="Dealer 1">
    <img src="images/acklams-beta.png" alt="Dealer 2">
    <img src="images/cf-racing.png" alt="Dealer 3">
    <img src="images/AGBIKES.avif" alt="Dealer 4">
    <img src="images/drysdale.png" alt="Dealer 5">
	<img src="images/craigs.png" alt="Dealer 6">
	<img src="images/gear4.png" alt="Dealer 7">
	<img src="images/inch-perfect.avif" alt="Dealer 8">
	<img src="images/gh.png" alt="Dealer 9">
	<img src="images/john-lee-motorcycles.png" alt="Dealer 10">
	<img src="images/judd.png" alt="Dealer 11">
	<img src="images/marsh-powersport.png" alt="Dealer 12">
	<img src="images/road-and-trials.avif" alt="Dealer 13">
	<img src="images/south-coast.png" alt="Dealer 15">
	<img src="images/sw-trials.avif" alt="Dealer 16">

    <!-- Repeat -->
     <img src="images/absoloute.png" alt="Dealer 1">
    <img src="images/acklams-beta.png" alt="Dealer 2">
    <img src="images/cf-racing.png" alt="Dealer 3">
    <img src="images/AGBIKES.avif" alt="Dealer 4">
    <img src="images/drysdale.png" alt="Dealer 5">
	<img src="images/craigs.png" alt="Dealer 6">
	<img src="images/gear4.png" alt="Dealer 7">
	<img src="images/inch-perfect.avif" alt="Dealer 8">
	<img src="images/gh.png" alt="Dealer 9">
	<img src="images/john-lee-motorcycles.png" alt="Dealer 10">
	<img src="images/judd.png" alt="Dealer 11">
	<img src="images/marsh-powersport.png" alt="Dealer 12">
	<img src="images/road-and-trials.avif" alt="Dealer 13">
	<img src="images/south-coast.png" alt="Dealer 15">
	<img src="images/sw-trials.avif" alt="Dealer 16">

  </div>
</div>
<!---logo start end -->

<!----top products -->

<div class="product-sections">
  <!-- Trials Column -->
  <div class="product-column">
    <h2 class="section-title">Top Trials Products</h2>
	<a href="trials.html" class="view-all-btn">View All</a>
      <div id="trials-product-container" class="product-container2 product-row"></div>
  </div>

  <!-- Enduro Column -->
  <div class="product-column">
    <h2 class="section-title">Top Enduro Products</h2>
	<a href="enduro.html" class="view-all-btn">View All</a>
      <div id="enduro-product-container" class="product-container2 product-row"></div>
  </div>

  <!-- Motocross Column -->
  <div class="product-column">
    <h2 class="section-title">Top Motocross Products</h2>
	<a href="mx.html" class="view-all-btn">View All</a>
     <div id="motocross-product-container" class="product-container2 product-row"></div>
  </div>
</div>
<!-----top products--->

<!---latest news -->
<div class="news-title">
  <h1>Latest News Posts</h1>
  <div id="posts">Loading...</div>
</div>
<!---top products -->

		<!-- FOOTER -->
		<footer id="footer">
			<!-- top footer -->
			<div class="section">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">About Us</h3>
								<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut.</p>
								<ul class="footer-links">
									<li><a href="#"><i class="fa fa-map-marker"></i>1734 Stonecoal Road</a></li>
									<li><a href="#"><i class="fa fa-phone"></i>+021-95-51-84</a></li>
									<li><a href="#"><i class="fa fa-envelope-o"></i>email@email.com</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Categories</h3>
								<ul class="footer-links">
									<li><a href="#">Hot deals</a></li>
									<li><a href="#">Laptops</a></li>
									<li><a href="#">Smartphones</a></li>
									<li><a href="#">Cameras</a></li>
									<li><a href="#">Accessories</a></li>
								</ul>
							</div>
						</div>

						<div class="clearfix visible-xs"></div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Information</h3>
								<ul class="footer-links">
									<li><a href="#">About Us</a></li>
									<li><a href="#">Contact Us</a></li>
									<li><a href="#">Privacy Policy</a></li>
									<li><a href="#">Orders and Returns</a></li>
									<li><a href="#">Terms & Conditions</a></li>
								</ul>
							</div>
						</div>

						<div class="col-md-3 col-xs-6">
							<div class="footer">
								<h3 class="footer-title">Service</h3>
								<ul class="footer-links">
									<li><a href="#">My Account</a></li>
									<li><a href="#">View Cart</a></li>
									<li><a href="#">Wishlist</a></li>
									<li><a href="#">Track My Order</a></li>
									<li><a href="#">Help</a></li>
								</ul>
							</div>
						</div>
					</div>
					<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /top footer -->

			<!-- bottom footer -->
			<div id="bottom-footer" class="section">
				<div class="container">
					<!-- row -->
					<div class="row">
						<div class="col-md-12 text-center">

							<span class="copyright">
								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved |  Wolfgang.dev</i> by <a href="https://wolfgang-dev.com/" target="_blank"></a>
							<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							</span>
						</div>
					</div>
						<!-- /row -->
				</div>
				<!-- /container -->
			</div>
			<!-- /bottom footer -->
		</footer>
		<!-- /FOOTER -->

		<!-- jQuery Plugins -->
		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/slick.min.js"></script>
		<script src="js/nouislider.min.js"></script>
		<script src="js/jquery.zoom.min.js"></script>
		<script src="js/main.js"></script>
        <script src="js/filter.js"></script>
<script>
  let currentIndex = 0;
  const slides = document.getElementById("slides");
  const totalSlides = slides.children.length;

  function showSlide(index) {
    const newIndex = (index + totalSlides) % totalSlides;
    slides.style.transform = `translateX(-${newIndex * 100}%)`;
    currentIndex = newIndex;
  }

  function changeSlide(direction) {
    showSlide(currentIndex + direction);
  }

  // Auto-slide every 5 seconds
  setInterval(() => changeSlide(1), 5000);

  // Fetch and display products for each category
       async function fetchProducts(category, containerId) {
        try {
            const response = await fetch(`https://test-jup8.onrender.com/products?table=${category}`);
            const products = await response.json();
            const container = document.getElementById(containerId);

            container.innerHTML = ''; // Clear existing content

            // Limit to the first three products
            const topProducts = products.slice(0, 3);

            topProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.classList.add('product-card');

                const productLink = product.product_link ? product.product_link : '#';
                const imageUrl = product.image_urls && Array.isArray(product.image_urls) ? product.image_urls[0] : '';

                productCard.innerHTML = `
                    <a href="${productLink}" target="_blank" class="product-link">
                        <img src="${imageUrl}" alt="Product Image">
                        <h2>${product.title}</h2>
                        <p>Price: ${product.price}</p>
                    </a>
                `;

                container.appendChild(productCard);
            });
        } catch (error) {
            console.error(`Error fetching ${category} products:`, error);
        }
    }

    // Fetch products for each category
    fetchProducts('product', 'trials-product-container');
    fetchProducts('enduro', 'enduro-product-container');
    fetchProducts('motocross', 'motocross-product-container');

	
    async function loadPosts() {
    try {
        const res = await fetch('http://localhost:3000/api/posts');
        const posts = await res.json();
        const container = document.getElementById('posts');
        container.innerHTML = ''; // Clear loading text

        if (posts.length === 0) {
            container.innerHTML = '<p>No posts yet.</p>';
            return;
        }

        // Sort posts by published_date in descending order and take the latest 3
        const latestPosts = posts.sort((a, b) => new Date(b.published_date) - new Date(a.published_date)).slice(0, 3);

        latestPosts.forEach(post => {
            // Truncate content to first few lines
            const truncatedContent = truncateContent(post.content);

            container.innerHTML += `
                <div class="article-card">
                    <div class="article-text">
                        <h2>${post.title}</h2>
                        <p class="date">${new Date(post.published_date).toLocaleDateString()}</p>
                        <div class="content">${truncatedContent}</div>
                        <button class="read-more" onclick="window.location.href='news.html?id=${post.id}'">Read More</button>
                    </div>
                    <div class="article-image">
                        ${post.featured_image ? `<img src="${post.featured_image}" alt="${post.title}">` : ''}
                    </div>
                </div>
            `;
        });
    } catch (err) {
        console.error('Failed to load posts:', err);
        document.getElementById('posts').innerHTML = '<p>Error loading posts.</p>';
    }
}

function truncateContent(content) {
    // Split content into lines and take the first few
    const lines = content.split('\n');
    const truncated = lines.slice(0, 2).join('\n'); // Adjust the number of lines as needed
    return truncated;
}

loadPosts();




</script>

	</body>
</html>

